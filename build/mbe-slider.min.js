/*! mbe-slider 05-02-2015 */
var mbeHelper={},MbeSlider=function(){"use strict";var a=function(a){this.options=mbeHelper.mergeObjects({element:null,direction:"horizontal",navigation:{drag:!0,type:"bullets",className:"mbe-slider-navigation",arrows:!1,clickable:!0,keys:!1},animationDuration:300,slideDuration:900,pullMargin:20,neverSkip:!1,autoSlide:0,onInit:!1,afterSlide:!1,onStartDragging:!1,onDragging:!1,onEndDragging:!1,transitionProperty:"all",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.33, 0.66, 0.66, 1)"},a),this.element=null,this._private={slides:[],mousedown:!1,position:{x:0,y:0},moved:!1,bindedEvents:!1,width:0,height:0,maxSlides:0,currentSlide:{x:0,y:0},dragStart:{x:0,y:0},dragMove:{x:0,y:0},speed:{x:0,y:0},dragStartTime:0,currentDirection:""},this.init()};return a}();!function(){"use strict";Node.prototype.hasOwnProperty("classList")||Object.defineProperty(Node.prototype,"classList",{get:function(){var a=this.getAttribute("class")||"",b=a.match(/[\w\-]+/gi)||[],c=this;return{add:function(){var a;for(a=0;a<arguments.length;a++)b.indexOf(arguments[a])<0&&b.push(arguments[a]);this.refresh()},remove:function(a){var c=b.indexOf(a);c>=0&&b.splice(c,1),this.refresh()},toggle:function(a,b){b?this.contains(a)||this.add(a):this.remove(a)},contains:function(a){return b.indexOf(a)>=0},refresh:function(){c.className=b.join(" "),c.setAttribute("class",c.className)}}}})}(mbeHelper),function(){"use strict";Node.prototype.mbeRmoveWhiteSpace=function(){var a,b;for(a=0;a<this.childNodes.length;a++)b=this.childNodes[a],3!==b.nodeType||/\S/.test(b.nodeValue)||this.removeChild(b)}}(),function(a){"use strict";a.throwError=function(a,b,c){throw{name:"mbeSliderException",message:a,log:{"function":b,object:c||null},toString:function(){return this.name+" > "+this.log["function"]+": "+this.message}}}}(mbeHelper),function(a){"use strict";Node.prototype.mbeBindEvent=function(b,c,d){if(!b)return void a.throwError("Cannot attach event with empty name","mbeBindEvent",this);if(!c)return void a.throwError("Function for the event does not exist","mbeBindEvent",this);var e=c.bind(d);this.bindedEvents||(this.bindedEvents={}),b.forEach(function(a){this.bindedEvents[a]||(this.bindedEvents[a]=[]),this.bindedEvents[a].push(e),this.addEventListener?this.addEventListener(a,e,!0):this.attachEvent("on"+a,e)},this)},Window.prototype.mbeBindEvent=Node.prototype.mbeBindEvent,Node.prototype.mbeUnbindEvent=function(b,c,d){return b?c?void b.forEach(function(a){var b;if(this.bindedEvents[a]&&this.bindedEvents[a].length)for(b=0;b<this.bindedEvents[a].length;b++)this.removeEventListener?this.removeEventListener(a,this.bindedEvents[a][b],!1):this.detachEvent("on"+a,this.bindedEvents[a][b]);this.removeEventListener?this.removeEventListener(a,c.bind(d),!1):this.attachEvent("on"+a,c.bind(d))},this):void a.throwError("Function for the event dettachment does not exist","mbeUnbindEvent",this):void a.throwError("Cannot dettach event with empty name","mbeUnbindEvent",this)},Window.prototype.mbeUnbindEvent=Node.prototype.mbeUnbindEvent}(mbeHelper),function(a){"use strict";a.mergeObjects=function(b,c){var d;for(d in c)c.hasOwnProperty(d)&&("object"!=typeof c[d]||c[d]instanceof Element?b[d]=c[d]:(b[d]&&"object"==typeof b[d]||(b[d]={}),b[d]=a.mergeObjects(b[d],c[d])));return b},a.toNumber=function(a){return a=Number(a),(isNaN(a)||!isFinite(a))&&(a=0),a}}(mbeHelper),function(){"use strict";Node.prototype.mbeSetStyle=function(a){var b,c=this.style;for(b in a)a.hasOwnProperty(b)&&("undefined"==typeof MSStyleCSSProperties?c.setProperty(b,a[b]):c[b]=a[b])},Node.prototype.mbeRemoveStyle=function(a){var b;for(b=0;b<a.length;b++)this.mbeRemoveSingleStyle(a[b])},Node.prototype.mbeRemoveSingleStyle=function(a){this.style.removeProperty(a)}}(),function(a){"use strict";a.prototype.setAnimation=function(a){a>0?this.element.mbeSetStyle({"-webkit-transform-style":"preserve-3d","-webkit-backface-visibility":"hidden","-webkit-perspective":1e3,"-webkit-transition-property":"all","-moz-transition-property":"-moz-transform","-o-transition-property":"-o-transform","-ms-transition-property":"-ms-transform","transition-property":"transform","-webkit-transition-duration":a+"ms","-moz-transition-duration":a+"ms","-o-transition-duration":a+"ms","-ms-transition-duration":a+"ms","transition-duration":a+"ms","-webkit-transition-timing-function":this.options.transitionTimingFunction,"-moz-transition-timing-function":this.options.transitionTimingFunction,"-o-transition-timing-function":this.options.transitionTimingFunction,"-ms-transition-timing-function":this.options.transitionTimingFunction,"transition-timing-function":this.options.transitionTimingFunction}):this.element.mbeRemoveStyle(["-webkit-transition-property","-moz-transition-property","-o-transition-property","-ms-transition-property","transition-property","-webkit-transition-duration","-moz-transition-duration","-o-transition-duration","-ms-transition-duration","transition-duration","-webkit-transition-timing-function","-moz-transition-timing-function","-o-transition-timing-function","-ms-transition-timing-function","transition-timing-function"])}}(MbeSlider),function(a){"use strict";a.prototype.autoSlide=function(){this.options.autoSlide&&(this.autoSlideTimeout&&window.clearTimeout(this.autoSlideTimeout),this.autoSlideTimeout=window.setTimeout(this.gotoNextSlide.bind(this,!0),this.options.autoSlide||3e3))}}(MbeSlider),function(a){"use strict";a.prototype.click=function(a){return this._private.moved&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),this._private.moved}}(MbeSlider),function(a){"use strict";a.prototype.destroyStyle=function(){var a,b,c=this.getElementStyle(),d=this.getSlidesStyle(),e=this.getParentStyle();for(a in c)c.hasOwnProperty(a)&&this.element.mbeRemoveSingleStyle(a);for(a in d)if(d.hasOwnProperty(a))for(b=0;b<this._private.slides.length;b++)this._private.slides[b].element.mbeRemoveSingleStyle(a);for(a in e)e.hasOwnProperty(a)&&this.element.parentNode.mbeRemoveSingleStyle(a)},a.prototype.destroyHtml=function(){if(this.element.parentNode.classList.contains("mbe-slider")){var a=this.element.parentNode;a.parentNode.insertBefore(this.element,a),a.parentNode.removeChild(a)}},a.prototype.destroy=function(){console.time("destroy #"+this.options.id),this.destroyStyle(),this.unbindEvents(),this.destroyHtml(),console.timeEnd("destroy #"+this.options.id)}}(MbeSlider),function(a){"use strict";a.prototype.mouseUp=function(a){this._private.moved&&a.preventDefault&&a.preventDefault(),this._private.mousedown=!1,0!==this._private.speed.x&&(this._private.position.x+=this._private.speed.x/8*this._private.width),0!==this._private.speed.y&&(this._private.position.y+=this._private.speed.y/8*this._private.height);var b=this._private.position.x>0?0:Math.round(Math.abs(this._private.position.x)/this._private.width),c=this._private.position.y>0?0:Math.round(Math.abs(this._private.position.y)/this._private.height);return this.options.neverSkip?(b=this.neverSkip(b+1,"x"),c=this.neverSkip(c+1,"y")):(b++,c++),this.gotoSlide(b,c,this.options.animationDuration),this._private.moved&&this.options.onEndDragging&&"function"==typeof this.options.onEndDragging&&this.options.onEndDragging.call(this),!this._private.moved}}(MbeSlider),function(a,b){"use strict";a.prototype.isSlidingProperly=function(a){var b,c=this.getMousePosition(a),d=this._private.dragStart,e=Math.abs(c.x-d.x),f=Math.abs(c.y-d.y);return 10>e&&10>f?!0:(this._private.currentDirection||(b=e>f?"horizontal":"vertical",this._private.currentDirection=b),this._private.currentDirection===this.options.direction)},a.prototype.getMousePosition=function(a){var b=a||window.event;return{x:b.pageX,y:b.pageY}},a.prototype.mouseMove=function(a){if(this._private.mousedown&&this.isSlidingProperly(a)){a.preventDefault();var c=!1,d=this.getMousePosition(a),e=d.x-this._private.dragMove.x,f=d.y-this._private.dragMove.y,g=this._private.position.x+e,h=this._private.position.y+f;return this._private.speed.x=b.toNumber(e/(Date.now()-this._private.dragStartTime)),this._private.speed.y=b.toNumber(f/(Date.now()-this._private.dragStartTime)),"horizontal"===this.options.direction&&0!==e?(c=!0,h=0,g>0?g=(d.x-this._private.dragStart.x)*this.options.pullMargin/100:g<-(this._private.maxSlides-1)*this._private.width&&(g=-(this._private.maxSlides-1)*this._private.width+(d.x-this._private.dragStart.x)*this.options.pullMargin/100),this._private.speed.y=0):"vertical"===this.options.direction&&0!==f&&(c=!0,g=0,h>0?h=(d.y-this._private.dragStart.y)*this.options.pullMargin/100:h<-(this._private.maxSlides-1)*this._private.height&&(h=-(this._private.maxSlides-1)*this._private.height+(d.y-this._private.dragStart.y)*this.options.pullMargin/100),this._private.speed.x=0),c&&(this._private.moved=!0,this.moveTo(g,h)),this._private.dragStartTime=Date.now(),this._private.dragMove.x=d.x,this._private.dragMove.y=d.y,this.options.onDragging&&"function"==typeof this.options.onDragging&&this.options.onDragging.call(this),!1}}}(MbeSlider,mbeHelper),function(a){"use strict";a.prototype.mouseDown=function(a){1==a.which&&a.preventDefault&&a.preventDefault(),this._private.moved=!1;var b=this.getMousePosition(a);return this.setAnimation(0),this._private.mousedown=!0,this._private.dragStart.x=b.x,this._private.dragStart.y=b.y,this._private.speed.x=0,this._private.speed.y=0,this._private.currentDirection=0,this._private.dragStartTime=Date.now(),this._private.dragMove.x=b.x,this._private.dragMove.y=b.y,this.options.onStartDragging&&"function"==typeof this.options.onStartDragging&&this.options.onStartDragging.call(this),!1}}(MbeSlider),function(a){"use strict";a.prototype.bindEvents=function(){if(!this.bindedEvents){if(this.element.mbeBindEvent(this.getEventName("start"),this.mouseDown,this),document.mbeBindEvent(this.getEventName("move"),this.mouseMove,this),document.mbeBindEvent(this.getEventName("end"),this.mouseUp,this),this.element.mbeBindEvent(this.getEventName("click"),this.click,this),window.mbeBindEvent(["resize"],this.resize,this),this.options.navigation&&this.options.navigation.keys&&window.mbeBindEvent(["keydown"],this.keyDown,this),this.options.navigation&&this.options.navigation.type&&this.options.navigation.clickable){var a=this;Array.prototype.forEach.call(this.element.parentNode.querySelector("."+this.options.navigation.className).childNodes,function(b){b.mbeBindEvent(a.getEventName("click"),a.navigationClick,a)})}this.bindedEvents=!0}},a.prototype.unbindEvents=function(){this.element.mbeUnbindEvent(this.getEventName("start"),this.mouseDown,this),document.mbeUnbindEvent(this.getEventName("move"),this.mouseMove,this),document.mbeUnbindEvent(this.getEventName("end"),this.mouseUp,this),this.element.mbeUnbindEvent(this.getEventName("click"),this.click,this),window.mbeUnbindEvent(["resize"],this.resize,this),this.options.navigation&&this.options.navigation.keys&&window.mbeUnbindEvent(["keydown"],this.keyDown,this),this.bindedEvents=!1},a.prototype.getEventName=function(a){var b={start:["touchstart"],move:["touchmove"],end:["touchend"],click:["click"]};return this.options.navigation&&this.options.navigation.drag&&(b.start.push("mousedown"),b.move.push("mousemove"),b.end.push("mouseup")),b[a]||void 0}}(MbeSlider),function(a,b){"use strict";a.prototype.setElement=function(a){this.element="string"==typeof a?document.querySelector(a):a,this.element||b.throwError("Element cannot be null","setElement",this)},a.prototype.setSlides=function(){var a;for(this._private.slides=[],a=0;a<this.element.children.length;a++)this._private.slides.push({element:this.element.children[a]})}}(MbeSlider,mbeHelper),function(a){"use strict";a.prototype.hide=function(){this.element.parentNode.mbeSetStyle({display:"none"})},a.prototype.show=function(){this.element.parentNode.mbeSetStyle({display:"block"})},a.prototype.resize=function(){return this._private.width=this.element.offsetWidth,this._private.height=this.element.offsetHeight,this.gotoSlide(this._private.currentSlide.x,this._private.currentSlide.y,!1),this._private.moved}}(MbeSlider),function(a){"use strict";a.prototype.getCurrentAxe=function(){return"horizontal"===this.options.direction?"x":"y"},a.prototype.getCurrentSlideIndex=function(){var a=this.getCurrentAxe();return this._private.currentSlide[a]},a.prototype.getCurrentSlide=function(){var a=this.getCurrentSlideIndex();return this._private.slides[a-1]}}(MbeSlider),function(a){"use strict";a.prototype.gotoSlide=function(a,b,c){"undefined"==typeof c&&(c=!0),this.setAnimation(c===!0?this.options.slideDuration:c||0),"undefined"==typeof a&&(a=0),"undefined"==typeof b&&(b=0),a>this._private.maxSlides?a=this._private.maxSlides:0>=a&&(a=1),b>this._private.maxSlides?b=this._private.maxSlides:0>=b&&(b=1),this._private.currentSlide.x=a,this._private.currentSlide.y=b,this.moveTo(-(a-1)*this._private.width,-(b-1)*this._private.height),this.setNavigationItem(),this.setNavigationArrows(),this.autoSlide(),this.options.afterSlide&&"function"==typeof this.options.afterSlide&&this.options.afterSlide.call(this,this.getCurrentSlideIndex(),this.getCurrentSlide())},a.prototype.gotoNextSlide=function(a){var b={x:this._private.currentSlide.x,y:this._private.currentSlide.y};"horizontal"===this.options.direction?b.x=b.x<this._private.maxSlides?b.x+1:1:b.y=b.y<this._private.maxSlides?b.y+1:1,this.gotoSlide(b.x,b.y,a)},a.prototype.gotoPreviousSlide=function(a){var b={x:this._private.currentSlide.x,y:this._private.currentSlide.y};"horizontal"===this.options.direction?b.x=b.x>1?b.x-1:this._private.maxSlides:b.y=b.y>1?b.y-1:this._private.maxSlides,this.gotoSlide(b.x,b.y,a)}}(MbeSlider),function(a){"use strict";a.prototype.setData=function(){Array.prototype.forEach.call(this.element.attributes,function(a){/^data\-/i.test(a.name)&&this.element.parentNode.setAttribute(a.name,a.value)},this)},a.prototype.initStyle=function(){var a,b=this.getElementStyle(),c=this.getSlidesStyle(),d=this.getParentStyle();for(this.element.mbeSetStyle(b),a=0;a<this._private.slides.length;a++)this._private.slides[a].element.mbeSetStyle(c);this.element.parentNode.mbeSetStyle(d)},a.prototype.initHtml=function(){if(!this.element.parentNode.classList.contains("mbe-slider")){var a=document.createElement("div"),b=this.element.cloneNode(!0);a.setAttribute("class",this.element.className),a.classList.add("mbe-slider"),a.appendChild(b),this.element.parentNode.replaceChild(a,this.element),this.setElement(b)}},a.prototype.init=function(){return this.setElement(this.options.element),this.element.mbeRmoveWhiteSpace(),this.initHtml(),this.setSlides(),this.initStyle(),this._private.width=this.element.offsetWidth,this._private.height=this.element.offsetHeight,this._private.maxSlides=this.element.childNodes.length,this._private.currentSlide.x=1,this._private.currentSlide.y=1,this.appendArrows(),this.appendNavigation(),this.setData(),this.bindEvents(),this.autoSlide(),this.options.onInit&&"function"==typeof this.options.onInit&&this.options.onInit.call(this),this}}(MbeSlider),function(a){"use strict";a.prototype.keyDown=function(a){var b=a.keyCode||a.which;"horizontal"===this.options.direction?39===b?(a.preventDefault(),this.gotoNextSlide(!0)):37===b&&(a.preventDefault(),this.gotoPreviousSlide(!0)):40===b?(a.preventDefault(),this.gotoNextSlide(!0)):38===b&&(a.preventDefault(),this.gotoPreviousSlide(!0))}}(MbeSlider),function(a,b){"use strict";a.prototype.moveTo=function(a,c){"horizontal"===this.options.direction?c=0:"vertical"===this.options.direction&&(a=0),this._private.position.x=b.toNumber(a),this._private.position.y=b.toNumber(c),this.element.mbeSetStyle({"-webkit-transform":"translate("+a+"px, "+c+"px)","-moz-transform":"translate("+a+"px, "+c+"px)","-o-transform":"translate("+a+"px, "+c+"px)","-ms-transform":"translate("+a+"px, "+c+"px)",transform:"translate("+a+"px, "+c+"px)"})}}(MbeSlider,mbeHelper),function(a){"use strict";a.prototype.appendArrows=function(){if(this.options.navigation&&this.options.navigation.arrows){var a=document.createElement("a");a.classList.add("mbe-arrow-back"),a.setAttribute("href","#go-back"),a.mbeBindEvent(this.getEventName("click"),this.arrowBackClick,this);var b=document.createElement("a");b.classList.add("mbe-arrow-forward"),b.setAttribute("href","#go-forward"),b.mbeBindEvent(this.getEventName("click"),this.arrowForwardClick,this);var c=document.createElement("div");c.classList.add("mbe-navigation-arrows"),c.appendChild(a),c.appendChild(b),this.element.parentNode.appendChild(c),this.setNavigationArrows()}},a.prototype.arrowBackClick=function(a){a.preventDefault(),this.gotoPreviousSlide(!0)},a.prototype.arrowForwardClick=function(a){a.preventDefault(),this.gotoNextSlide(!0)},a.prototype.setNavigationArrows=function(){if(this.options.navigation&&this.options.navigation.arrows){var a=this.getCurrentSlideIndex(),b=this.element.parentNode.querySelector(".mbe-arrow-back"),c=this.element.parentNode.querySelector(".mbe-arrow-forward");1>=a?b.classList.add("hidden"):b.classList.remove("hidden"),a>=this._private.maxSlides?c.classList.add("hidden"):c.classList.remove("hidden")}}}(MbeSlider),function(a){"use strict";a.prototype.appendNavigation=function(){if(this.options.navigation&&this.options.navigation.type){this.options.navigation.type=this.options.navigation.type.toLowerCase(),["bullets","thumbs"].indexOf(this.options.navigation.type)<0&&(this.options.navigation.type="bullets");var a=document.createElement("div"),b=this.options.navigation.className;a.classList.add(b),a.classList.add(b+"-"+this.options.navigation.type),this._private.slides.forEach(function(c,d){var e=document.createElement("div");if(e.classList.add(b+"-item"),e.classList.add(b+"-item-"+d),0===d&&e.classList.add(b+"-item-selected"),"thumbs"===this.options.navigation.type&&c.getAttribute("data-thumb")){var f=document.createElement("img");f.src=c.getAttribute("data-thumb"),e.appendChild(f)}e.setAttribute("data-slide",d+1),a.appendChild(e)},this),this.element.parentNode.appendChild(a),this.setNavigationItem()}},a.prototype.navigationClick=function(a){a.preventDefault();var b=parseInt(a.currentTarget.getAttribute("data-slide"),10);"horizontal"===this.options.direction?this.gotoSlide(b,1,!0):this.gotoSlide(1,b,!0)},a.prototype.setNavigationItem=function(){if(this.options.navigation&&this.options.navigation.type){var a=this.getCurrentSlideIndex(),b=this.options.navigation.className,c=this.element.parentNode.querySelector("."+b).childNodes;Array.prototype.forEach.call(c,function(c,d){c.classList.remove(b+"-item-selected"),d===a-1&&c.classList.add(b+"-item-selected")})}}}(MbeSlider),function(a){"use strict";a.prototype.neverSkip=function(a,b){if("x"===b.toLowerCase()&&"horizontal"===this.options.direction){if(a>this._private.currentSlide.x+1)return this._private.currentSlide.x+1;if(a<this._private.currentSlide.x-1)return this._private.currentSlide.x-1}else if("y"===b.toLowerCase()&&"vertical"===this.options.direction){if(a>this._private.currentSlide.y+1)return this._private.currentSlide.y+1;if(a<this._private.currentSlide.y-1)return this._private.currentSlide.y-1}return a}}(MbeSlider),function(a){"use strict";a.prototype.refreshSlides=function(){this.destroyStyle(),this.setSlides(),this.initStyle()}}(MbeSlider),function(a){"use strict";a.prototype.getElementStyle=function(){var a={"list-style":"none",margin:"0",padding:"0"};switch(this.options.direction){case"horizontal":a["white-space"]="nowrap";break;case"vertical":a.height="100%"}return a},a.prototype.getSlidesStyle=function(){var a={margin:"0",padding:"0",height:"100%"};return"horizontal"===this.options.direction?(a.display="inline-block",a["vertical-align"]="middle",a.width="100%"):(a.display="block",a.width="auto"),a},a.prototype.getParentStyle=function(){var a={overflow:"hidden"};return"vertical"===this.options.direction&&(a.height="100%"),a}}(MbeSlider);